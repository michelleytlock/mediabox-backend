(this.webpackJsonpmediabox=this.webpackJsonpmediabox||[]).push([[0],{31:function(e,t,a){e.exports=a(63)},36:function(e,t,a){},55:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),o=a.n(i),s=(a(36),a(4)),l=a(5),c=a(7),m=a(6),d=a(2),u="https://media-box.herokuapp.com/mediabox",p=a(1),h=a.n(p),g=(a(54),a(55),function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loggedInUser:""},e.getUser=function(){h.a.get("".concat(u,"/user"),{withCredentials:!0}).then((function(t){t.data?e.setState({loggedInUser:t.data}):e.props.history.push("/login")})).catch((function(t){console.log(t),401===t.response.status&&e.props.history.push("/")}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.state.loggedInUser||this.getUser()}},{key:"render",value:function(){var e=this,t=this.props.component;return this.state.loggedInUser?r.a.createElement(d.a,{render:function(){return r.a.createElement(t,Object.assign({loggedInUser:e.state.loggedInUser},e.props))}}):null}}]),a}(n.Component)),v=Object(d.f)(g),f=a(8);function b(){return r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title"},"MEDIA BOX"),r.a.createElement(f.b,{to:"/signup"},r.a.createElement("button",{className:"button is-primary"},"Sign Up")),r.a.createElement(f.b,{to:"/login"},r.a.createElement("button",{className:"button is-primary"},"Log In"))))}function E(e){return r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title"},"Sign Up"),r.a.createElement("form",{onSubmit:e.onSignup},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"username"},"Username"),r.a.createElement("input",{className:"input",type:"text",id:"username",name:"username",placeholder:"Username"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"input",type:"email",id:"email",name:"email",placeholder:"user@user.com"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"input",type:"password",id:"password",name:"password",placeholder:"***********"})),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-link"},"Submit"))))))}function y(e){return r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"title"},"Log In"),r.a.createElement("form",{onSubmit:e.onLogin},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"username"},"Username"),r.a.createElement("input",{className:"input",type:"text",id:"username",name:"username",placeholder:"Username"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"input",type:"password",id:"password",name:"password",placeholder:"***********"})),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-link"},"Continue"))))))}function M(e){var t="https://image.tmdb.org/t/p/w500/"+e.random.poster_path;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:e.random.poster_path?t:"",alt:e.random.title}),r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"1")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"2")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"3")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"4")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"5"))),r.a.createElement("button",{onClick:e.onSkip,className:"button is-primary is-rounded"},"Skip"))}var N=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h4",{className:"subtitle is-4"},this.props.ratedList.length/10*100+"%"),r.a.createElement("progress",{className:"progress is-primary",value:this.props.ratedList.length/10*100,max:"100"},this.props.ratedList.length/10+"%")),r.a.createElement("br",null),r.a.createElement(M,{random:this.props.random,onRate:this.props.onRate,onSkip:this.props.onSkip}))}}]),a}(n.Component);function k(e){return r.a.createElement("div",{className:"media-filter"},r.a.createElement("button",{className:"button is-white",onClick:e.onMovieChange},r.a.createElement("h5",{className:"title is-5"},"MOVIES")),r.a.createElement("button",{className:"button is-white",onClick:e.onTVChange},r.a.createElement("h5",{className:"title is-5"},"TV SHOWS")))}function T(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar is-primary is-fixed-bottom myNav"},r.a.createElement(f.b,{className:"navbar-item",to:"/home"},"Discover"),r.a.createElement(f.b,{className:"navbar-item",to:"/watchlist"},"Watchlist"),r.a.createElement(f.b,{className:"navbar-item",to:"/profile"},"Profile")))}function w(e){var t="https://image.tmdb.org/t/p/w500/"+e.random.poster_path;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{to:"/".concat(e.type,"/").concat(e.random.id)},r.a.createElement("img",{src:e.random.poster_path?t:"",alt:e.random.title})),r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"1")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"2")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"3")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"4")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:e.onRate,className:"button is-primary is-rounded"},"5"))),r.a.createElement("button",{onClick:e.onSave,className:"button is-primary is-rounded"},"Save to Watchlist"),r.a.createElement("button",{onClick:e.onSkip,className:"button is-primary is-rounded"},"Skip"))}function S(e){var t,a={marginTop:"10px",marginRight:"10px"};return t="movie"===e.type?"Search movies...":"Search tv shows...",r.a.createElement("div",{className:"main-filter"},r.a.createElement("div",null,r.a.createElement("form",{className:"search-filter",onSubmit:e.onSearch},r.a.createElement("input",{className:"input searchbar",name:"search",type:"text",placeholder:t}),r.a.createElement("button",{className:"button is-primary is-rounded",type:"submit"},"Search")),r.a.createElement("button",{onClick:e.recommended,style:a,className:"button is-success is-light"},"Recommended For You"),r.a.createElement("button",{onClick:e.trending,style:a,className:"button is-info is-light"},"Trending")))}var C=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.loggedInUser,randomMedia:"",randomMediaType:"",list:[],mediaPage:"movie",recommendedState:!0},e.handleSearch=function(t){t.preventDefault(),console.log(t.target.search.value),console.log(e.props.history),h.a.get("".concat(u,"/").concat(e.state.mediaPage,"/").concat(t.target.search.value,"/searchresults"),{withCredentials:!0}).then((function(t){console.log(t.data);var a=t.data.filter((function(e){return e.poster_path}));console.log(a),e.props.history.push("/search")})).catch((function(e){console.log("search err"+e)}))},e.getRandomMedia=function(){var t=e.state.list.filter((function(e){return"rated"===e.listType})).filter((function(t){return t.mediaType===e.state.mediaPage})),a=t[Math.floor(Math.random()*t.length)];h.a.get("https://api.themoviedb.org/3/".concat(e.state.mediaPage,"/").concat(a.apiId,"/recommendations?api_key=").concat("48c700fc34506d5b64c983d8fba83cda","&language=en-US&page=1")).then((function(t){var a=t.data.results.filter((function(e){return e.poster_path})),n=Math.floor(Math.random()*a.length);console.log("This is recommended random media ",a[n]),e.setState({recommendedState:!0,randomMedia:a[n],randomMediaType:e.state.mediaPage})})).catch((function(e){console.log("getRandom err"+e)}))},e.getTrendingMedia=function(){console.log(e.state.recommendedState),h.a.get("https://api.themoviedb.org/3/trending/".concat(e.state.mediaPage,"/day?api_key=").concat("48c700fc34506d5b64c983d8fba83cda")).then((function(t){var a=t.data.results.filter((function(e){return e.poster_path})),n=Math.floor(Math.random()*a.length);console.log("This is trending media ",a[n]),e.setState({recommendedState:!1,randomMedia:a[n],randomMediaType:e.state.mediaPage})})).catch((function(e){console.log("gettrending err"+e)}))},e.handleRate=function(t){var a=t.target.innerHTML;console.log(e.state.recommendedState),h.a.post("".concat(u,"/create"),{mediaType:e.state.randomMediaType,apiId:e.state.randomMedia.id,listType:"rated",rating:a,description:e.state.randomMedia.overview,image:e.state.randomMedia.poster_path,title:"movie"===e.state.randomMediaType?e.state.randomMedia.title:e.state.randomMedia.name,genres:e.state.randomMedia.genres},{withCredentials:!0}).then((function(t){console.log(t.data.list),e.setState({list:t.data.list,randomMedia:"",randomMediaType:""},(function(){e.recommendedState?e.getRandomMedia():e.getTrendingMedia()}))})).catch((function(e){console.log("create media err"+e)}))},e.handleSkip=function(){h.a.post("".concat(u,"/create"),{mediaType:e.state.randomMediaType,apiId:e.state.randomMedia.id,listType:"skipped",description:e.state.randomMedia.overview,image:e.state.randomMedia.poster_path,title:"movie"===e.state.randomMediaType?e.state.randomMedia.title:e.state.randomMedia.name},{withCredentials:!0}).then((function(t){console.log(t.data.list),e.setState({list:t.data.list,randomMedia:"",randomMediaType:""},(function(){e.recommendedState?e.getRandomMedia():e.getTrendingMedia()}))})).catch((function(e){console.log("skip err"+e)}))},e.handleSave=function(){h.a.post("".concat(u,"/create"),{mediaType:e.state.randomMediaType,apiId:e.state.randomMedia.id,listType:"watchlist",description:e.state.randomMedia.overview,image:e.state.randomMedia.poster_path,title:"movie"===e.state.randomMediaType?e.state.randomMedia.title:e.state.randomMedia.name},{withCredentials:!0}).then((function(t){console.log(t.data.list),e.setState({list:t.data.list,randomMedia:"",randomMediaType:""},(function(){e.recommendedState?e.getRandomMedia():e.getTrendingMedia()}))})).catch((function(e){console.log("save to watchlist err"+e)}))},e.handleToggleMovie=function(){e.setState({mediaPage:"movie"},e.getRandomMedia)},e.handleToggleTV=function(){e.setState({mediaPage:"tv"},e.getRandomMedia)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat(u,"/userData"),{withCredentials:!0}).then((function(t){e.setState({list:t.data.list},(function(){e.getRandomMedia()}))})).catch((function(e){console.log("userData err"+e)}))}},{key:"render",value:function(){var e=this.state.randomMedia,t=this.state.randomMediaType;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{onMovieChange:this.handleToggleMovie,onTVChange:this.handleToggleTV}),r.a.createElement(S,{type:t,trending:this.getTrendingMedia,recommended:this.getRandomMedia,onSearch:this.handleSearch}),r.a.createElement(w,{random:e,type:t,onRate:this.handleRate,onSkip:this.handleSkip,onSave:this.handleSave}),r.a.createElement(T,null))}}]),a}(n.Component),I=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.loggedInUser,randomMedia:"",randomMediaType:"",list:[]},e.getRandomMedia=function(){console.log("get random media console log");var t,a=Math.floor(2*Math.random());t=1===a?"movie":"tv",h.a.get("https://api.themoviedb.org/3/".concat(t,"/popular?api_key=").concat("48c700fc34506d5b64c983d8fba83cda","&language=en-US&page=1")).then((function(a){var n=a.data.results.filter((function(e){return e.poster_path})),r=Math.floor(Math.random()*n.length);console.log(n[r]),e.setState({randomMedia:n[r],randomMediaType:t})})).catch((function(e){console.log("getrandom err"+e)}))},e.handleRate=function(t){var a=t.target.innerHTML;console.log(e.state.randomMedia.genre_ids),h.a.post("".concat(u,"/create"),{mediaType:e.state.randomMediaType,apiId:e.state.randomMedia.id,listType:"rated",rating:a,description:e.state.randomMedia.overview,image:e.state.randomMedia.poster_path,title:"movie"===e.state.randomMediaType?e.state.randomMedia.title:e.state.randomMedia.name,genres:e.state.randomMedia.genre_ids},{withCredentials:!0}).then((function(t){console.log(t.data.list),e.setState({list:t.data.list,randomMedia:"",randomMediaType:""}),e.state.list.filter((function(e){return"rated"===e.listType})).length<10&&e.getRandomMedia()})).catch((function(e){console.log("create media err"+e)}))},e.handleSkip=function(){h.a.post("".concat(u,"/create"),{mediaType:e.state.randomMediaType,apiId:e.state.randomMedia.id,listType:"skipped",description:e.state.randomMedia.overview,image:e.state.randomMedia.poster_path,title:"movie"===e.state.randomMediaType?e.state.randomMedia.title:e.state.randomMedia.name,genres:e.state.randomMedia.genre_ids},{withCredentials:!0}).then((function(t){console.log(t.data.list),e.setState({list:t.data.list,randomMedia:"",randomMediaType:""}),e.state.list.filter((function(e){return"rated"===e.listType})).length<10&&e.getRandomMedia()})).catch((function(e){console.log("skip err"+e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat(u,"/userData"),{withCredentials:!0}).then((function(t){e.setState({list:t.data.list});var a=[];0!==e.state.list.length&&(a=e.state.list.filter((function(e){return e.listType="rated"}))),a.length<10&&e.getRandomMedia()})).catch((function(e){console.log("CDM err"+e)}))}},{key:"render",value:function(){var e=this.state.list.filter((function(e){return e.listType="rated"}));return r.a.createElement(r.a.Fragment,null,e.length<10?r.a.createElement(N,{ratedList:e,random:this.state.randomMedia,onRate:this.handleRate,onSkip:this.handleSkip}):r.a.createElement(C,this.props))}}]),a}(n.Component),O=a(18),j=a.n(O);function R(e){return console.log(e.list),r.a.createElement("div",{className:"list"},e.list.map((function(t,a){return r.a.createElement("div",{key:a,className:"list-item"},r.a.createElement(f.b,{to:"/".concat(e.type,"/").concat(t.apiId)},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/"+t.mediaId.image,alt:t.mediaId.title}),r.a.createElement("h5",{className:"subtitle is-5"},t.mediaId.title),t.rating&&r.a.createElement("p",null,t.rating)))})))}var _=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={ratedMovies:[],ratedTVShows:[],topMovieGenres:[],topTVGenres:[],mediaPage:"movie",allMovieGenres:[],allTVGenres:[]},e.handleToggleMovie=function(){e.setState({mediaPage:"movie"},(function(){e.renderChart()}))},e.handleToggleTV=function(){e.setState({mediaPage:"tv"},(function(){e.renderChart()}))},e.handleSort=function(t){if(console.log(t.target.value),"alpha"===t.target.value){var a=e.state.ratedMovies,n=e.state.ratedTVShows,r=a.sort((function(e,t){return e.mediaId.title<t.mediaId.title?-1:e.mediaId.title>t.mediaId.title?1:0}));console.log(r);var i=n.sort((function(e,t){return e.mediaId.title<t.mediaId.title?-1:e.mediaId.title>t.mediaId.title?1:0}));console.log(i),e.setState({ratedMovies:r,ratedTVShows:i})}else{var o=e.state.ratedMovies.sort((function(e,t){return t.rating-e.rating})),s=e.state.ratedTVShows.sort((function(e,t){return t.rating-e.rating}));e.setState({ratedMovies:o,ratedTVShows:s})}},e.renderChart=function(){var t=e.state,a=t.ratedMovies,n=t.ratedTVShows,r=t.allMovieGenres,i=t.allTVGenres,o=0,s=0,l=0,c=0,m=0;if("movie"===e.state.mediaPage)for(var d=0;d<a.length;d++)switch(a[d].rating){case 1:o++;break;case 2:s++;break;case 3:l++;break;case 4:c++;break;case 5:m++;break;default:console.log(a[d].apiId+"missing rating")}else for(var u=0;u<n.length;u++)switch(n[u].rating){case 1:o++;break;case 2:s++;break;case 3:l++;break;case 4:c++;break;case 5:m++;break;default:console.log(n[u].apiId+"missing rating")}var p=document.getElementById("myChart"),h=(new j.a(p,{type:"bar",data:{labels:["1","2","3","4","5"],datasets:[{label:"ratings",data:[o,s,l,c,m],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:0}]},options:{title:{display:!0,text:"Rated Medias"},legend:{display:!1},tooltips:{enabled:!1},scales:{xAxes:[{gridLines:{drawBorder:!0,drawOnChartArea:!1}}],yAxes:[{display:!0,gridLines:{drawBorder:!1,drawOnChartArea:!1},ticks:{display:!1}}]}}}),[]),g=[];"movie"===e.state.mediaPage?(h=r.map((function(e){return e[0]})),g=r.map((function(e){return e[1]}))):(h=i.map((function(e){return e[0]})),g=i.map((function(e){return e[1]})));var v=document.getElementById("myDoughnutChart");new j.a(v,{type:"doughnut",data:{datasets:[{data:g,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(255, 206, 86, 0.2)","rgba(255, 206, 86, 0.2)","rgba(255, 206, 86, 0.2)","rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)","rgba(255, 206, 86, 1)"]}],labels:h}})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat(u,"/userData"),{withCredentials:!0}).then((function(t){h.a.get("".concat(u,"/getGenres"),{withCredentials:!0}).then((function(a){var n=t.data.list.filter((function(e){return"rated"===e.listType})),r=n.filter((function(e){return"movie"===e.mediaType})),i=n.filter((function(e){return"tv"===e.mediaType})),o={},s=(r.map((function(e){for(var t=0;t<e.mediaId.genres.length;t++){var a=e.mediaId.genres[t];o[a]?o[a]++:o[a]=1}})),[]);for(var l in o)s.push([l,o[l]]);s.sort((function(e,t){return t[1]-e[1]}));var c=s.slice(0,3).map((function(e){return Number(e[0])})),m=a.data.movie.genres.filter((function(e){return c.includes(e.id)})),d=a.data.movie.genres.reduce((function(e,t){for(var a=0;a<s.length;a++)t.id===Number(s[a][0])&&(s[a][0]=t.name,e.push(s[a]));return e}),[]),u={},p=(i.map((function(e){for(var t=0;t<e.mediaId.genres.length;t++){var a=e.mediaId.genres[t];u[a]?u[a]++:u[a]=1}})),[]);for(var h in u)p.push([h,u[h]]);p.sort((function(e,t){return t[1]-e[1]}));var g=p.slice(0,3).map((function(e){return Number(e[0])})),v=a.data.tv.genres.filter((function(e){return g.includes(e.id)})),f=a.data.tv.genres.reduce((function(e,t){for(var a=0;a<p.length;a++)t.id===Number(p[a][0])&&(p[a][0]=t.name,e.push(p[a]));return e}),[]);e.setState({ratedMovies:r,ratedTVShows:i,topMovieGenres:m,topTVGenres:v,allMovieGenres:d,allTVGenres:f},(function(){e.renderChart()}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=new Date(this.props.loggedInUser.createdAt),t=e.getFullYear(),a=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,this.props.loggedInUser.username),r.a.createElement("h1",null,this.props.loggedInUser.email),r.a.createElement("h1",null,"Joined in ",a," ",t),r.a.createElement(k,{onMovieChange:this.handleToggleMovie,onTVChange:this.handleToggleTV}),r.a.createElement("canvas",{id:"myChart",width:"400",height:"400"}),r.a.createElement("h1",null,"Top Genres"),"movie"===this.state.mediaPage?this.state.topMovieGenres.map((function(e){return r.a.createElement("p",{key:e.id},e.name)})):this.state.topTVGenres.map((function(e){return r.a.createElement("p",{key:e.id},e.name)})),r.a.createElement("canvas",{id:"myDoughnutChart",width:"400",height:"400"}),r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"sort",value:"alpha",onClick:this.handleSort}),"Sort by Alphabetical"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"sort",value:"rating",onClick:this.handleSort}),"Sort by Rating")),r.a.createElement(R,{list:"movie"===this.state.mediaPage?this.state.ratedMovies:this.state.ratedTVShows,type:this.state.mediaPage}),r.a.createElement(T,null))}}]),a}(n.Component),P=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.loggedInUser,list:[],mediaPage:"movie"},e.handleToggleMovie=function(){window.localStorage.setItem("mediaPage","movie"),e.setState({mediaPage:"movie"})},e.handleToggleTV=function(){window.localStorage.setItem("mediaPage","tv"),e.setState({mediaPage:"tv"})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat(u,"/watchlist"),{withCredentials:!0}).then((function(t){e.setState({list:t.data})})).catch((function(e){console.log("get watchlist err"+e)}))}},{key:"render",value:function(){var e=this.state.mediaPage;window.localStorage.getItem("mediaPage")&&(e=window.localStorage.getItem("mediaPage"));var t=this.state.list.filter((function(t){return t.mediaType===e}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{onMovieChange:this.handleToggleMovie,onTVChange:this.handleToggleTV}),0===t.length?r.a.createElement("h1",null,"Start adding to your Watchlist!"):r.a.createElement(R,{list:t,type:this.state.mediaPage}),r.a.createElement(T,null))}}]),a}(n.Component),D="https://image.tmdb.org/t/p/w500/",V=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={id:"",mediaType:"",media:"",credits:""},e.handleBack=function(){e.props.history.goBack()},e.handleRate=function(t){var a=t.target.innerHTML;h.a.post("".concat(u,"/create"),{mediaType:e.state.mediaType,apiId:e.state.media.id,listType:"rated",rating:a,description:e.state.media.overview,image:e.state.media.poster_path,title:"movie"===e.state.mediaType?e.state.media.title:e.state.media.name},{withCredentials:!0}).then((function(t){e.props.history.goBack()})).catch((function(e){console.log("create media err"+e)}))},e.handleSkip=function(){h.a.post("".concat(u,"/create"),{mediaType:e.state.mediaType,apiId:e.state.media.id,listType:"skipped",description:e.state.media.overview,image:e.state.media.poster_path,title:"movie"===e.state.mediaType?e.state.media.title:e.state.media.name},{withCredentials:!0}).then((function(t){e.props.history.goBack()})).catch((function(e){console.log("skip err"+e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.computedMatch.params.id,a=this.props.computedMatch.params.mediaType;h.a.get("".concat(u,"/getDetails/").concat(a,"/").concat(t),{withCredentials:!0}).then((function(n){console.log(n.data),e.setState({id:t,mediaType:a,media:n.data.media,credits:n.data.credits})})).catch((function(e){console.log("CDM err"+e)}))}},{key:"render",value:function(){var e,t=this.state.media,a=t.genres,n=t.overview,i=t.backdrop_path,o=t.release_date,s=t.runtime,l=t.tagline,c=t.title,m=t.created_by,d=t.first_air_date,u=t.last_air_date,p=t.number_of_episodes,h=t.number_of_seasons,g=t.status,v=t.name,f=this.state.credits,b=f.cast,E=f.crew;return E&&(e=E.filter((function(e){return"Director"===e.job}))),console.log(this.state.media),r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.handleBack,className:"button is-primary is-light"},"Back"),r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:this.handleRate,className:"button is-primary is-rounded"},"1")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:this.handleRate,className:"button is-primary is-rounded"},"2")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:this.handleRate,className:"button is-primary is-rounded"},"3")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:this.handleRate,className:"button is-primary is-rounded"},"4")),r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:this.handleRate,className:"button is-primary is-rounded"},"5"))),r.a.createElement("button",{onClick:this.handleSkip,className:"button is-primary is-rounded"},"Remove from Watchlist"),"movie"===this.state.mediaType?r.a.createElement("div",null,r.a.createElement("img",{src:D+i,alt:c}),r.a.createElement("h2",{className:"title is-2"},c),r.a.createElement("p",null,l),r.a.createElement("p",null,o),r.a.createElement("p",null,s),r.a.createElement("p",null,n),a&&a.map((function(e,t){return r.a.createElement("h5",{key:t,className:"subtitle is-5"},e.name)})),r.a.createElement("h3",{className:"subtitle is-3"},"Details"),r.a.createElement("div",null,b&&b.slice(0,4).map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{src:D+e.profile_path,alt:c}),r.a.createElement("h5",{className:"subtitle is-5"},e.name," as ",e.character))}))),r.a.createElement("div",null,E&&r.a.createElement("div",null,r.a.createElement("img",{src:D+e[0].profile_path,alt:c}),r.a.createElement("h5",{className:"subtitle is-5"},"Director: ",e[0].name)))):r.a.createElement("div",null,r.a.createElement("img",{src:D+i,alt:v}),r.a.createElement("h2",{className:"title is-2"},v),r.a.createElement("p",null,p),r.a.createElement("p",null,h),r.a.createElement("p",null,g),r.a.createElement("p",null,n),r.a.createElement("p",null,d),r.a.createElement("p",null,u),a&&a.map((function(e,t){return r.a.createElement("h5",{key:t,className:"subtitle is-5"},e.name)})),r.a.createElement("h3",{className:"subtitle is-3"},"Details"),m&&r.a.createElement("div",null,m[0].profile_path&&r.a.createElement("img",{src:D+m[0].profile_path,alt:m[0].name}),r.a.createElement("h5",{className:"subtitle is-5"},"Created By: ",m[0].name)),r.a.createElement("div",null,b&&b.slice(0,4).map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{src:D+e.profile_path,alt:c}),r.a.createElement("h5",{className:"subtitle is-5"},e.name," as ",e.character))})))))}}]),a}(n.Component),U=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleBack=function(){e.props.history.goBack()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.handleBack,className:"button is-primary is-light"},"Back"))}}]),a}(n.Component),A=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSignUp=function(t){t.preventDefault();var a=t.target.username.value,n=t.target.email.value,r=t.target.password.value;h.a.post("".concat(u,"/signup"),{username:a,email:n,password:r},{withCredentials:!0}).then((function(){e.props.history.push("/home")})).catch((function(e){console.log("sign up error"+e)}))},e.handleLogin=function(t){t.preventDefault();var a=t.target.username.value,n=t.target.password.value;h.a.post("".concat(u,"/login"),{username:a,password:n},{withCredentials:!0}).then((function(){e.props.history.push("/home")})).catch((function(e){console.log("log in err"+e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(b,null)}}),r.a.createElement(d.a,{path:"/signup",render:function(t){return r.a.createElement(E,Object.assign({onSignup:e.handleSignUp},t))}}),r.a.createElement(d.a,{path:"/login",render:function(t){return r.a.createElement(y,Object.assign({onLogin:e.handleLogin},t))}}),r.a.createElement(v,{path:"/home",component:I}),r.a.createElement(v,{path:"/profile",component:_}),r.a.createElement(v,{path:"/watchlist",component:P}),r.a.createElement(v,{path:"/:mediaType/:id",component:V}),r.a.createElement(v,{path:"/search",component:U})))}}]),a}(n.Component),B=Object(d.f)(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(f.a,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.b0acdfd7.chunk.js.map